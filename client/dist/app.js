!function(){function t(t,o){t.state("home",{url:"/",templateUrl:"/components/home/home.html"}),t.state("dashboard",{url:"/dashboard",controller:"DashboardController",controllerAs:"dashboard",templateUrl:"/components/dashboard/dashboard.html"}),t.state("newContact",{url:"/dashboard/contact/new",controller:"EditContactController",controllerAs:"editContact",templateUrl:"/components/dashboard/edit/editContact.html"}),t.state("editContact",{url:"/dashboard/contact/:id",controller:"EditContactController",controllerAs:"editContact",templateUrl:"/components/dashboard/edit/editContact.html"}),t.state("about",{url:"/about",templateUrl:"/components/about/about.html"}),t.state("404",{url:"/404",templateUrl:"/components/errors/404.html"}),o.when("","/"),o.otherwise("/404")}angular.module("contactManager.common",["ui.router"]).config(["$stateProvider","$urlRouterProvider",t])}(),function(){"use strict";angular.module("contactManager.dashboard",["contactManager.common","ui.bootstrap.datetimepicker","ngDialog"])}(),function(){"use strict";function t(){return{link:function(t,o,n){o.on("click",function(){$("#navbar").removeClass("in")})}}}angular.module("contactManager.common").directive("cmCloseNavbar",t)}(),function(){"use strict";function t(t,o){return{restrict:"EAC",scope:{},bindToController:{show:"="},controllerAs:"ctrl",link:function(t,n,i,e){t.$watch(function(){return e.show},function(t){if(1==t){var i=o.innerHeight/2;n.find("i").css("top",i)}})},controller:function(){},templateUrl:"/components/common/directives/loader.html"}}angular.module("contactManager.common").directive("cmLoader",["LoadingFactory","$window",t])}(),function(){"use strict";function t(){return{restrict:"A",link:function(t,o,n){o.on("mouseenter",function(){o.addClass("scale")}),o.on("mouseleave",function(){o.removeClass("scale")})}}}angular.module("contactManager.common").directive("cmScalePanel",t)}(),function(){"use strict";function t(){return{restrict:"EA",replace:!0,scope:{},bindToController:{summary:"="},controllerAs:"ctrl",controller:["$scope",function(t){var o=this;o.errorCount=0,t.$watch(function(){return o.summary},function(){o.summary&&o.summary.errors?o.errorCount=Object.keys(o.summary.errors).length:o.errorCount=0})}],templateUrl:"/components/common/directives/validationSummary.html"}}angular.module("contactManager.common").directive("cmValidationSummary",t)}(),function(){"use strict";function t(){return{restrict:"EA",replace:!0,scope:{},bindToController:{addresses:"="},controllerAs:"ctrl",controller:function(){this.addressFormVisibility=!1,this.addressForm=null,this.address={street:[]},this.editMode=!1,this.addOrUpdateAddress=function(t){this.addressForm.submitted=!0,this.addressForm&&(this.addressForm.$invalid||(this.editMode?this.editMode=!1:this.addresses.unshift(t),this.changeAddressFormVisibility(!1),this.addressForm.$setPristine(),this.addressForm.submitted=!1,this.address={street:[]}))},this.editAddress=function(t){this.changeAddressFormVisibility(!0),this.address=t,this.editMode=!0},this.removeAddress=function(t,o){o.stopPropagation(),this.addresses.splice(t,1),this.changeAddressFormVisibility(!1)},this.changeAddressFormVisibility=function(t){this.addressFormVisibility=t},this.cancelEdit=function(){this.address={street:[]},this.changeAddressFormVisibility(!1)}},templateUrl:"/components/dashboard/edit/addresses.html"}}angular.module("contactManager.dashboard").directive("cmAddresses",t)}(),function(){"use strict";function t(){return{restrict:"EA",replace:!0,scope:{},bindToController:{emails:"="},controllerAs:"ctrl",controller:function(){this.mailsFormVisibility=!1,this.mailForm=null,this.addMail=function(t){if(this.mailForm.submitted=!0,this.mailForm){if(this.mailForm.$invalid)return void(this.mailForm.submitted=!0);this.emails.unshift(t),this.editMail={},this.changeMailsFormVisibility(!1),this.mailForm.submitted=!1,this.mailForm.$setPristine()}},this.removeMail=function(t){this.emails.splice(t,1),this.changeMailsFormVisibility(!1)},this.changeMailsFormVisibility=function(t){this.mailsFormVisibility=t}},templateUrl:"/components/dashboard/edit/mails.html"}}angular.module("contactManager.dashboard").directive("cmMails",t)}(),function(){"use strict";function t(){return{restrict:"EA",replace:!0,scope:{},bindToController:{phones:"="},controllerAs:"ctrl",controller:function(){this.phoneFormVisibility=!1,this.phoneForm=null,this.addPhone=function(t){this.phoneForm.submitted=!0,this.phoneForm&&(this.phoneForm.$invalid||(this.phones.unshift(t),this.editPhone={},this.changePhonesFormVisibility(!1),this.phoneForm.$setPristine(),this.phoneForm.submitted=!1))},this.removePhone=function(t){this.phones.splice(t,1),this.changePhonesFormVisibility(!1)},this.changePhonesFormVisibility=function(t){this.phoneFormVisibility=t}},templateUrl:"/components/dashboard/edit/phones.html"}}angular.module("contactManager.dashboard").directive("cmPhones",t)}(),function(){function t(t,o){return{get:function(){var n=o.defer();return t.get("/api/contact").then(function(t){n.resolve(t.data)})["catch"](function(t){n.reject(t)}),n.promise},getById:function(n){var i=o.defer();return t.get("/api/contact/"+n).then(function(t){i.resolve(t.data)})["catch"](function(t){i.reject(t)}),i.promise},add:function(n){var i=o.defer();return t.post("/api/contact",{contact:n}).then(function(t){i.resolve(t.data)})["catch"](function(t){i.reject(t)}),i.promise},update:function(n,i){var e=o.defer();return t.put("/api/contact/"+n,{contact:i}).then(function(t){e.resolve(t.data)})["catch"](function(t){e.reject(t)}),e.promise},remove:function(n){var i=o.defer();return t["delete"]("/api/contact/"+n).then(function(t){i.resolve(t)})["catch"](function(t){i.reject(t)}),i.promise}}}angular.module("contactManager.common").factory("ContactFactory",["$http","$q",t])}(),function(){angular.module("contactManager.common").factory("LoadingFactory",function(){return{status:!1,show:function(){this.status=!0},hide:function(){this.status=!1}}})}(),function(){"use strict";function t(t,o,n){var i=this;n.show(),t.get().then(function(t){i.contacts=t})["catch"](function(t){})["finally"](function(){n.hide()}),this.editContact=function(t){o.go("editContact",{id:t._id})}}angular.module("contactManager.dashboard").controller("DashboardController",["ContactFactory","$state","LoadingFactory",t])}(),function(){"use strict";function t(t,o,n,i,e,r,a){var c=this;this.contactFormSubmitted=!1,this.contact={phones:[],emails:[],addresses:[]},this.editMode=!1,this.validationSummary=null,this.saveChanges=function(){this.contactFormSubmitted=!0,this.contactForm.name.$valid,a.show(),c.editMode?t.update(this.contact._id,this.contact).then(function(t){c.contact=t,c.validationSummary=null})["catch"](function(t){400===t.status&&t.data.errors&&(c.validationSummary=t.data)})["finally"](function(){a.hide()}):t.add(this.contact).then(function(t){n.go("editContact",{id:t._id}),c.validationSummary=null})["catch"](function(t){400===t.status&&t.data.errors&&(c.validationSummary=t.data)})["finally"](function(){a.hide()})},this.removeContactDialog=function(){var o=r.open({template:"/components/dashboard/edit/sureToDelete.html",className:"ngdialog-theme-plain",controller:function(){this.removeContact=function(){t.remove(c.contact._id).then(function(){n.go("dashboard"),o.close()})["catch"](function(t){c.validationSummary=error.data})},this.close=o.close},controllerAs:"dialog"})},this.init=function(){o.id?(this.editMode=!0,o.contact?this.contact=o.contact:t.getById(o.id).then(function(t){c.contact=t})["catch"](function(t){c.validationSummary=t.data})):this.editMode=!1,i.$watch(function(){return c.contact.birthday},function(t){c.contact.birthday=e("date")(t,"yyyy-MM-dd")})},this.init()}angular.module("contactManager.dashboard").controller("EditContactController",["ContactFactory","$stateParams","$state","$scope","$filter","ngDialog","LoadingFactory",t])}(),function(){"use strict";function t(t){t.useAnchorScroll()}function o(t){this.loading=t}angular.module("contactManager",["contactManager.dashboard","contactManager.common"]).config(["$uiViewScrollProvider",t]).controller("AppController",["LoadingFactory",o])}();