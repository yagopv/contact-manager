!function(){"use strict";function t(t,e){t.useAnchorScroll(),e.defaults.headers.get||(e.defaults.headers.get={}),e.defaults.headers.get["If-Modified-Since"]="Mon, 26 Jul 1997 05:00:00 GMT",e.defaults.headers.get["Cache-Control"]="no-cache",e.defaults.headers.get.Pragma="no-cache"}function e(t,e){this.loading=t,this.isAuthenticated=e.isAuthenticated}angular.module("app",["ui.bootstrap.datetimepicker","ngDialog","ui.router","satellizer","toastr","ngMessages"]).config(["$uiViewScrollProvider","$httpProvider",t]).controller("AppController",["LoadingFactory","$auth",e])}(),function(){function t(t,e,i){function o(t,e){var i=t.defer();return e.isAuthenticated()?i.reject():i.resolve(),i.promise}function n(t,e,i){var o=t.defer();return i.isAuthenticated()?o.resolve():e.path("/login"),o.promise}t.state("home",{url:"/",templateUrl:"/js/home/home.html"}),t.state("dashboard",{url:"/dashboard",controller:"DashboardController",controllerAs:"dashboard",resolve:{loginRequired:["$q","$location","$auth",n]},templateUrl:"/js/dashboard/dashboard.html"}),t.state("newContact",{url:"/dashboard/contact/new",controller:"EditContactController",controllerAs:"editContact",resolve:{loginRequired:["$q","$location","$auth",n]},templateUrl:"/js/dashboard/edit/editContact.html"}),t.state("editContact",{url:"/dashboard/contact/:id",controller:"EditContactController",controllerAs:"editContact",resolve:{loginRequired:["$q","$location","$auth",n]},templateUrl:"/js/dashboard/edit/editContact.html"}),t.state("about",{url:"/about",templateUrl:"/js/about/about.html"}),t.state("login",{url:"/login",controller:"LoginController",controllerAs:"login",resolve:{skipIfLoggedIn:["$q","$auth",o]},templateUrl:"/js/account/login/login.html"}),t.state("signup",{url:"/signup",controller:"SignupController",controllerAs:"signup",resolve:{skipIfLoggedIn:["$q","$auth",o]},templateUrl:"/js/account/signup/signup.html"}),t.state("logout",{url:"/logout",template:null,controller:"LogoutController"}),t.state("profile",{url:"/profile",controller:"ProfileController",controllerAs:"profile",resolve:{loginRequired:["$q","$location","$auth",n]},templateUrl:"/js/account/profile/profile.html"}),t.state("404",{url:"/404",templateUrl:"/js/errors/404.html"}),e.when("","/"),e.otherwise("/404"),i.google({clientId:"449344279332-bcfhd8oar650umuve9sk73hios44dh63.apps.googleusercontent.com"})}angular.module("app").config(["$stateProvider","$urlRouterProvider","$authProvider",t])}(),function(){"use strict";function t(t,e,i){var o=this;i.show(),t.get().then(function(t){o.contacts=t})["catch"](function(t){})["finally"](function(){i.hide()}),this.editContact=function(t){e.go("editContact",{id:t._id})}}angular.module("app").controller("DashboardController",["ContactFactory","$state","LoadingFactory",t])}(),function(){"use strict";function t(t,e,i,o){this.login=function(){o.show(),e.login(this.user).then(function(){t.go("dashboard")})["catch"](function(t){i.error(t.data.message,t.status)})["finally"](function(){o.hide()})},this.authenticate=function(n){o.show(),e.authenticate(n).then(function(){t.go("dashboard")})["catch"](function(t){t.error?i.error(t.error):t.data?i.error(t.data.message,t.status):i.error(t)})["finally"](function(){o.hide()})}}angular.module("app").controller("LoginController",["$state","$auth","toastr","LoadingFactory",t])}(),function(){"use strict";function t(t,e,i){t.isAuthenticated()&&(i.show(),t.logout().then(function(){i.hide(),e.go("home")}))}angular.module("app").controller("LogoutController",["$auth","$state","LoadingFactory",t])}(),function(){"use strict";function t(t,e,i){var o=this;this.getProfile=function(){i.getProfile().then(function(t){o.user=t.data})["catch"](function(t){e.error(t.data.message,t.status)})},this.updateProfile=function(){i.updateProfile(this.user).then(function(){e.success("Profile has been updated")})["catch"](function(t){e.error(t.data.message,t.status)})},this.link=function(i){t.link(i).then(function(){e.success("You have successfully linked a "+i+" account"),o.getProfile()})["catch"](function(t){e.error(t.data.message,t.status)})},this.unlink=function(i){t.unlink(i).then(function(){e.info("You have unlinked a "+i+" account"),o.getProfile()})["catch"](function(t){e.error(t.data?t.data.message:"Could not unlink "+i+" account",t.status)})},this.getProfile()}angular.module("app").controller("ProfileController",["$auth","toastr","AccountFactory",t])}(),function(){"use strict";function t(t,e,i,o){var n=this;this.signup=function(){o.show(),e.signup(n.user).then(function(o){e.setToken(o),t.path("/"),i.info("You have successfully created a new account and have been signed-in")})["catch"](function(t){i.error(t.data.message)})["finally"](function(){o.hide()})}}angular.module("app").controller("SignupController",["$location","$auth","toastr","LoadingFactory",t])}(),function(){"use strict";function t(){return{link:function(t,e,i){e.on("click",function(){$("#navbar").removeClass("in")})}}}angular.module("app").directive("closeNavbar",t)}(),function(){"use strict";function t(t){return{restrict:"EAC",scope:{},bindToController:{show:"="},controllerAs:"ctrl",link:function(e,i,o,n){e.$watch(function(){return n.show},function(e){if(1==e){var o=t.innerHeight/2;i.find("i").css("top",o)}})},controller:function(){},templateUrl:"/js/common/directives/loader.html"}}angular.module("app").directive("appLoader",["$window",t])}(),function(){"use strict";function t(){return{require:"ngModel",scope:{otherModelValue:"=passwordMatch"},link:function(t,e,i,o){o.$validators.compareTo=function(e){return e===t.otherModelValue},t.$watch("otherModelValue",function(){o.$validate()})}}}angular.module("app").directive("passwordMatch",[t])}(),function(){"use strict";function t(){return{restrict:"A",require:"ngModel",link:function(t,e,i,o){var n=e.children(),r=Array.prototype.slice.call(n.children()),a=r.slice(-1)[0],s=r.slice(-2),c=r.slice(-3),l=r.slice(-4);e.after(n),e.bind("keyup",function(){var t,e={positive:{},negative:{}},i={positive:{},negative:{}},n=0;angular.forEach(r,function(t){t.style.backgroundColor="#ebeef1"}),o.$viewValue&&(e.positive.lower=o.$viewValue.match(/[a-z]/g),e.positive.upper=o.$viewValue.match(/[A-Z]/g),e.positive.numbers=o.$viewValue.match(/\d/g),e.positive.symbols=o.$viewValue.match(/[$-\/:-?{-~!^_`\[\]]/g),e.positive.middleNumber=o.$viewValue.slice(1,-1).match(/\d/g),e.positive.middleSymbol=o.$viewValue.slice(1,-1).match(/[$-\/:-?{-~!^_`\[\]]/g),i.positive.lower=e.positive.lower?e.positive.lower.length:0,i.positive.upper=e.positive.upper?e.positive.upper.length:0,i.positive.numbers=e.positive.numbers?e.positive.numbers.length:0,i.positive.symbols=e.positive.symbols?e.positive.symbols.length:0,i.positive.numChars=o.$viewValue.length,t+=i.positive.numChars>=8?1:0,i.positive.requirements=t>=3?t:0,i.positive.middleNumber=e.positive.middleNumber?e.positive.middleNumber.length:0,i.positive.middleSymbol=e.positive.middleSymbol?e.positive.middleSymbol.length:0,e.negative.consecLower=o.$viewValue.match(/(?=([a-z]{2}))/g),e.negative.consecUpper=o.$viewValue.match(/(?=([A-Z]{2}))/g),e.negative.consecNumbers=o.$viewValue.match(/(?=(\d{2}))/g),e.negative.onlyNumbers=o.$viewValue.match(/^[0-9]*$/g),e.negative.onlyLetters=o.$viewValue.match(/^([a-z]|[A-Z])*$/g),i.negative.consecLower=e.negative.consecLower?e.negative.consecLower.length:0,i.negative.consecUpper=e.negative.consecUpper?e.negative.consecUpper.length:0,i.negative.consecNumbers=e.negative.consecNumbers?e.negative.consecNumbers.length:0,n+=4*i.positive.numChars,i.positive.upper&&(n+=2*(i.positive.numChars-i.positive.upper)),i.positive.lower&&(n+=2*(i.positive.numChars-i.positive.lower)),(i.positive.upper||i.positive.lower)&&(n+=4*i.positive.numbers),n+=6*i.positive.symbols,n+=2*(i.positive.middleSymbol+i.positive.middleNumber),n+=2*i.positive.requirements,n-=2*i.negative.consecLower,n-=2*i.negative.consecUpper,n-=2*i.negative.consecNumbers,e.negative.onlyNumbers&&(n-=i.positive.numChars),e.negative.onlyLetters&&(n-=i.positive.numChars),n=Math.max(0,Math.min(100,Math.round(n))),n>85?angular.forEach(l,function(t){t.style.backgroundColor="#008cdd"}):n>65?angular.forEach(c,function(t){t.style.backgroundColor="#6ead09"}):n>30?angular.forEach(s,function(t){t.style.backgroundColor="#e09115"}):a.style.backgroundColor="#e01414")})},template:'<span class="password-strength-indicator"><span></span><span></span><span></span><span></span></span>'}}angular.module("app").directive("passwordStrength",[t])}(),function(){"use strict";function t(){return{restrict:"A",link:function(t,e,i){e.on("mouseenter",function(){e.addClass("scale")}),e.on("mouseleave",function(){e.removeClass("scale")})}}}angular.module("app").directive("scalePanel",t)}(),function(){"use strict";function t(){return{restrict:"EA",replace:!0,scope:{},bindToController:{summary:"="},controllerAs:"ctrl",controller:["$scope",function(t){var e=this;e.errorCount=0,t.$watch(function(){return e.summary},function(){e.summary&&e.summary.errors?e.errorCount=Object.keys(e.summary.errors).length:e.errorCount=0})}],templateUrl:"/js/common/directives/validationSummary.html"}}angular.module("app").directive("validationSummary",t)}(),function(){function t(t){return{getProfile:function(){return t.get("/api/me")},updateProfile:function(e){return t.put("/api/me",e)}}}angular.module("app").factory("AccountFactory",["$http",t])}(),function(){function t(t,e){return{get:function(){var i=e.defer();return t.get("/api/contact").then(function(t){i.resolve(t.data)})["catch"](function(t){i.reject(t)}),i.promise},getById:function(i){var o=e.defer();return t.get("/api/contact/"+i).then(function(t){o.resolve(t.data)})["catch"](function(t){o.reject(t)}),o.promise},add:function(i){var o=e.defer();return t.post("/api/contact",{contact:i}).then(function(t){o.resolve(t.data)})["catch"](function(t){o.reject(t)}),o.promise},update:function(i,o){var n=e.defer();return t.put("/api/contact/"+i,{contact:o}).then(function(t){n.resolve(t.data)})["catch"](function(t){n.reject(t)}),n.promise},remove:function(i){var o=e.defer();return t["delete"]("/api/contact/"+i).then(function(t){o.resolve(t)})["catch"](function(t){o.reject(t)}),o.promise}}}angular.module("app").factory("ContactFactory",["$http","$q",t])}(),function(){"use strict";angular.module("app").factory("LoadingFactory",function(){return{status:!1,show:function(){this.status=!0},hide:function(){this.status=!1}}})}(),function(){"use strict";angular.module("app").component("contactAddresses",{restrict:"EA",replace:!0,bindings:{addresses:"="},controllerAs:"ctrl",controller:function(){this.addressFormVisibility=!1,this.addressForm=null,this.address={street:[]},this.editMode=!1,this.addOrUpdateAddress=function(t){this.addressForm.submitted=!0,this.addressForm&&(this.addressForm.$invalid||(this.editMode?this.editMode=!1:this.addresses.unshift(t),this.changeAddressFormVisibility(!1),this.addressForm.$setPristine(),this.addressForm.submitted=!1,this.address={street:[]}))},this.editAddress=function(t){this.changeAddressFormVisibility(!0),this.address=t,this.editMode=!0},this.removeAddress=function(t,e){e.stopPropagation(),this.addresses.splice(t,1),this.changeAddressFormVisibility(!1)},this.changeAddressFormVisibility=function(t){this.addressFormVisibility=t},this.cancelEdit=function(){this.address={street:[]},this.changeAddressFormVisibility(!1)}},templateUrl:"/js/dashboard/edit/addresses.html"})}(),function(){"use strict";function t(t,e,i,o,n,r,a){var s=this;this.contactFormSubmitted=!1,this.contact={phones:[],emails:[],addresses:[]},this.editMode=!1,this.validationSummary=null,this.saveChanges=function(){this.contactFormSubmitted=!0,this.contactForm.name.$valid,a.show(),s.editMode?t.update(this.contact._id,this.contact).then(function(t){s.contact=t,s.validationSummary=null})["catch"](function(t){400===t.status&&t.data.errors&&(s.validationSummary=t.data)})["finally"](function(){a.hide()}):t.add(this.contact).then(function(t){i.go("editContact",{id:t._id}),s.validationSummary=null})["catch"](function(t){400===t.status&&t.data.errors&&(s.validationSummary=t.data)})["finally"](function(){a.hide()})},this.removeContactDialog=function(){var e=r.open({template:"/js/dashboard/edit/sureToDelete.html",className:"ngdialog-theme-plain",controller:function(){this.removeContact=function(){t.remove(s.contact._id).then(function(){i.go("dashboard"),e.close()})["catch"](function(t){s.validationSummary=error.data})},this.close=e.close},controllerAs:"dialog"})},this.init=function(){e.id?(this.editMode=!0,e.contact?this.contact=e.contact:t.getById(e.id).then(function(t){s.contact=t})["catch"](function(t){s.validationSummary=t.data})):this.editMode=!1,o.$watch(function(){return s.contact.birthday},function(t){s.contact.birthday=n("date")(t,"yyyy-MM-dd")})},this.init()}angular.module("app").controller("EditContactController",["ContactFactory","$stateParams","$state","$scope","$filter","ngDialog","LoadingFactory",t])}(),function(){"use strict";angular.module("app").component("contactMails",{restrict:"EA",replace:!0,bindings:{emails:"="},controllerAs:"ctrl",controller:function(){this.mailsFormVisibility=!1,this.mailForm=null,this.addMail=function(t){if(this.mailForm.submitted=!0,this.mailForm){if(this.mailForm.$invalid)return void(this.mailForm.submitted=!0);this.emails.unshift(t),this.editMail={},this.changeMailsFormVisibility(!1),this.mailForm.submitted=!1,this.mailForm.$setPristine()}},this.removeMail=function(t){this.emails.splice(t,1),this.changeMailsFormVisibility(!1)},this.changeMailsFormVisibility=function(t){this.mailsFormVisibility=t}},templateUrl:"/js/dashboard/edit/mails.html"})}(),function(){"use strict";angular.module("app").component("contactPhones",{restrict:"EA",replace:!0,bindings:{phones:"="},controllerAs:"ctrl",controller:function(){this.phoneFormVisibility=!1,this.phoneForm=null,this.addPhone=function(t){this.phoneForm.submitted=!0,this.phoneForm&&(this.phoneForm.$invalid||(this.phones.unshift(t),this.editPhone={},this.changePhonesFormVisibility(!1),this.phoneForm.$setPristine(),this.phoneForm.submitted=!1))},this.removePhone=function(t){this.phones.splice(t,1),this.changePhonesFormVisibility(!1)},this.changePhonesFormVisibility=function(t){this.phoneFormVisibility=t}},templateUrl:"/js/dashboard/edit/phones.html"})}();